document.addEventListener('DOMContentLoaded',function(){const timers=document.querySelectorAll('.ctp-countdown');timers.forEach(timer=>{const mode=timer.getAttribute('data-mode')||'once';const autoHide=timer.getAttribute('data-autohide')==='true';const durationSeconds=timer.getAttribute('data-duration-seconds');const expiredText=timer.getAttribute('data-expired-text')||'Countdown expired';let targetDate=new Date(timer.getAttribute('data-date')).getTime();const updateCountdown=()=>{const now=new Date().getTime();let distance=targetDate-now;if(distance<0){if(mode==='repeat'&&durationSeconds){targetDate=new Date().getTime()+(parseInt(durationSeconds,10)*1000);distance=targetDate-now}else{if(autoHide){timer.style.display='none'}else{timer.innerHTML=expiredText}
clearInterval(intervalId);return}}
const days=Math.floor(distance/(1000*60*60*24));const hours=Math.floor((distance%(1000*60*60*24))/(1000*60*60));const minutes=Math.floor((distance%(1000*60*60))/(1000*60));const seconds=Math.floor((distance%(1000*60))/1000);timer.querySelector('.ctp-days').textContent=days.toString().padStart(2,'0');timer.querySelector('.ctp-hours').textContent=hours.toString().padStart(2,'0');timer.querySelector('.ctp-minutes').textContent=minutes.toString().padStart(2,'0');timer.querySelector('.ctp-seconds').textContent=seconds.toString().padStart(2,'0')};updateCountdown();const intervalId=setInterval(updateCountdown,1000)})})