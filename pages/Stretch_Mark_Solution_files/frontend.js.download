(function($){'use strict';var supportsPassive=!1;try{var opts=Object.defineProperty({},'passive',{get:function(){supportsPassive=!0}});window.addEventListener('testPassive',null,opts);window.removeEventListener('testPassive',null,opts)}catch(e){}
function setCookie(name,days){var d=new Date();d.setDate(d.getDate()+(days||30));var attrs="; path=/; expires="+d.toUTCString()+"; SameSite=Lax";if(location.protocol==="https:")attrs+="; Secure";document.cookie=name+"=1"+attrs}
function getCookie(name){var parts=document.cookie?document.cookie.split(';'):[];for(var i=0;i<parts.length;i++){var c=parts[i].trim();if(c.indexOf(name+'=')===0)return!0}
return!1}
function getScrollY(){return(typeof window.scrollY==='number')?window.scrollY:(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0)}
function onExitIntent(cb){var fired=!1;function handler(e){if(fired)return;if(e.clientY<=0){fired=!0;document.removeEventListener('mouseout',handler);cb()}}
document.addEventListener('mouseout',handler)}
function whenScrollPx(px,cb){var fired=!1;px=Math.max(0,parseInt(px||0,10));var scrollOpts=supportsPassive?{passive:!0}:!1;function onScroll(){if(fired)return;if(getScrollY()>=px){fired=!0;window.removeEventListener('scroll',onScroll,scrollOpts);cb()}}
window.addEventListener('scroll',onScroll,scrollOpts);if(getScrollY()>=px){fired=!0;window.removeEventListener('scroll',onScroll,scrollOpts);cb()}}
function show($el){$el.attr('aria-hidden','false').addClass('visible')}
function hide($el){$el.attr('aria-hidden','true').removeClass('visible')}
var $header=$('.jamisan-fb-header');var $footer=$('.jamisan-fb-footer');var cfg=window.jamisanFB||{};var postId=parseInt(cfg.postId||0,10);var H_COOKIE='jamisan_fb_header_'+postId;function setupBar($el,c,cookieName,dismissable){if(!$el.length)return;if(!c||!c.enabled)return;if(cookieName&&getCookie(cookieName))return;var rotationTimer=null;switch(c.trigger){case 'load':if(document.readyState==='complete'){show($el)}else{window.addEventListener('load',function(){show($el)})}
break;case 'delay':setTimeout(function(){show($el)},Math.max(0,c.delaySec|0)*1000);break;case 'scroll':var px=parseInt(c.scrollPct||0,10);whenScrollPx(px,function(){show($el)});break;case 'exit':onExitIntent(function(){show($el)});break;default:if(document.readyState==='complete'){show($el)}else{window.addEventListener('load',function(){show($el)})}}
if(dismissable){$el.one('click','[data-jfb-close]',function(e){e.preventDefault();hide($el);if(rotationTimer){clearInterval(rotationTimer);rotationTimer=null}
if(cookieName)setCookie(cookieName,parseInt(c.cookieDays,10)||30);if(cfg.ajaxurl&&cfg.nonce){$.post(cfg.ajaxurl,{action:'jamisan_dismiss_header',post_id:postId,nonce:cfg.nonce})}})}
if(c.enableRotation&&c.rotationInterval){(function rotateMessages(containerSel){var $container=$el.find(containerSel);var $msgs=$container.find('.jamisan-fb-message');if(!$msgs.length)return;if($msgs.length<2){$msgs.show();return}
var idx=0;$msgs.hide().eq(0).show();rotationTimer=setInterval(function(){$msgs.eq(idx).fadeOut(200,function(){idx=(idx+1)%$msgs.length;$msgs.eq(idx).fadeIn(200)})},c.rotationInterval)})('.jamisan-fb-message-container')}}
setupBar($header,(cfg.header||{}),H_COOKIE,!0);setupBar($footer,(cfg.footer||{}),null,!1)})(jQuery)